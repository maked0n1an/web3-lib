from async_eth_lib.models.contracts.raw_contract import RawContract
from async_eth_lib.models.swap.swap_info import SwapInfo
from async_eth_lib.utils.helpers import read_json
from tasks.base_task import BaseTask


class SyncSwap(BaseTask):
    SYNC_SWAP_ROUTER = RawContract(
        title='SyncSwap Router',
        address='0x2da10A1e27bF85cEdD8FFb1AbBe97e53391C0295',
        abi=read_json(
            path=('data', 'abis', 'zksync', 'sync_swap', 'abi.json')
        )
    )
    
    async def swap(
        self,
        swap_info: SwapInfo
    ) -> str:
        data = "0x2cc4081e00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000008dd19b8fa66bc0000000000000000000000000000000000000000000000000000000064ff7c5c0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000600000000000000000000000003355df6d4c9c3035724fd0e3914de96a5a83aaf400000000000000000000000000000000000000000000000000000000003b8c3c0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000080115c708e12edd42e504c1cd52aea96c547c05c00000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000600000000000000000000000003355df6d4c9c3035724fd0e3914de96a5a83aaf4000000000000000000000000e747990d5a3df6737851022cba3a32efe85684e700000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000"
        return BaseTask.parse_params(params=data)